/* Minimap.module.css — оптимизировано */
:root {
  --minimap-width: 90px;
  --minimap-height: 400px;
  --indicator-height: 20%;
  --indicator-top: 0%;
  --minimap-thumbnail-bg: none;
  /* New: control how the thumbnail fits inside the container */
  --minimap-fit: contain; /* contain | cover | 100% auto | auto 100% */
  --minimap-position: top center; /* e.g., center, top center */
  --minimap-bg-color: rgba(16, 18, 27, 0.5);
  --minimap-border-color: rgba(255, 255, 255, 0.1);
  --indicator-bg-color: rgba(66, 153, 225, 0.3);
  --indicator-border-color: rgba(66, 153, 225, 0.8);
  --glass-blur: 5px;
  --glass-border: 1px solid rgba(255, 255, 255, 0.1);
}

.minimap-container {
  position: fixed;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: var(--minimap-width);
  height: var(--minimap-height);
  background: rgb(10 11 20);
  -webkit-backdrop-filter: blur(var(--glass-blur));
  backdrop-filter: blur(var(--glass-blur));
  clip-path: polygon(0 15px, 15px 0, 100% 0, 100% 100%, 15px 100%, 0 calc(100% - 15px));
  z-index: 1000;
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.36);
  pointer-events: auto;
  border: var(--glass-border);
  border-right: none;
  overflow: hidden;
  transition: opacity .2s ease, transform .2s ease; /* вместо all */
}

.minimap-container::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,.1) 0%, rgba(255,255,255,.05) 100%);
  pointer-events: none;
}

.minimap-thumbnail {
  position: relative;
  width: 100%; height: 100%;
  overflow: hidden;
  background-color: rgba(16, 18, 27, 0.5);
  background-image: var(--minimap-thumbnail-bg);
  background-size: var(--minimap-fit);
  background-repeat: no-repeat;
  background-position: var(--minimap-position);
  background-origin: border-box;
  background-blend-mode: overlay;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  border: 0; border-radius: 0;
  will-change: background-image; /* точечный will-change */
  transition: background-image 0s; /* отключаем плавный «смаз» */
}

.minimap-interaction-layer {
  position: absolute; inset: 0;
  cursor: pointer;
  z-index: 1;
  outline: none;
}

.minimap-interaction-layer:focus { box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.5); }
.minimap-interaction-layer:hover { background-color: rgba(0, 0, 0, 0.05); }

.minimap-indicator {
  position: absolute; left: 0; right: 0;
  top: var(--indicator-top);
  height: var(--indicator-height);
  background-color: rgba(66, 153, 225, 0.3);
  border: 2px solid rgba(66, 153, 225, 0.27);
  border-radius: 3px;
  box-sizing: border-box;
  transition: top 0.1s ease-out, height 0.1s ease-out;
  pointer-events: none;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* Видимость */
.hidden { visibility: hidden; opacity: 0; transition: visibility 0s .2s, opacity .2s ease-in-out; }

/* Кастомные размеры (оставляем одну пару имён) */
.has-custom-width { width: var(--minimap-width) !important; }
.has-custom-height { height: var(--minimap-height) !important; }

/* Удалены неиспользуемые .hasCustomWidth/.hasCustomHeight/.minimap/.minimapContainer */

/*
  Utility sizing classes to control the screenshot behavior without TS changes
  Usage example: <Minimap className={`${styles['minimap--cover']} ${styles['minimap--center']}`} />
*/
.minimap--contain { --minimap-fit: contain; }
.minimap--cover { --minimap-fit: cover; }
.minimap--fitHeight { --minimap-fit: auto 100%; }
.minimap--fitWidth { --minimap-fit: 100% auto; }
.minimap--center { --minimap-position: center; }
.minimap--top { --minimap-position: top center; }

.viewportIndicator { /* оставлено для совместимости, если используется где-то в проекте */
  opacity: 0; pointer-events: none;
  position: absolute; left: 0; right: 0; top: 0; height: 0;
  background: rgba(11,160,249,0.2);
  border: 1px solid rgba(11,160,249,0.8);
  border-left: none; border-right: none;
  transition: top .05s linear, height .05s linear, opacity .1s ease;
  will-change: top, height;
  box-shadow: 0 0 0 1px rgba(11,160,249,0.3);
  z-index: 2;
}
.viewportIndicator.active { opacity: 1; }
.viewportIndicator::before,
.viewportIndicator::after {
  content: ''; position: absolute; left: 0; width: 100%; height: 2px;
  background: rgba(11,160,249,0.8);
  box-shadow: 0 0 5px rgba(11,160,249,0.8);
}
.viewportIndicator::before { top: 0; }
.viewportIndicator::after { bottom: 0; }

@keyframes pulse { 0%{opacity:.7} 50%{opacity:.3} 100%{opacity:.7} }
.minimap-thumbnail:hover .viewportIndicator { animation: pulse 2s infinite; }

@media (max-width: 768px) {
  .minimap-container { display: none !important; }
}
